# UnionLink 社交小程序开发助手

请你作为项目的协作开发助手，阅读本项目的代码结构，并按照以下要求修改项目或添加功能。你可以直接对代码进行重构、注释、优化，并在需要的地方新增模块。请务必遵循良好的编码规范和可读性。

## 🧩 项目目标

本项目是一个基于微信小程序的**UnionLink社交小程序**，专为展会、会议等社交场景设计。核心功能包括：

- **配置化架构系统**：统一的配置管理，支持多主题切换和全局文字管理
- **智能问卷调查**：8步渐进式问卷系统，支持多主题配置和动态验证
- **社群智能分类**：基于用户画像的四维度社群自动分类算法
- **社交连接体验**：黑胶唱片风格的主题浏览和两层名片交互设计
- **数据可视化**：社群报告和成员关系的可视化展示

## 🎨 配置化架构特色

### 统一配置系统
- **单文件管理**：`utils/config.js` 统一管理所有配置
- **多主题支持**：支持 `union-digital-life` 和 `workplace-skills` 等主题
- **文字配置化**：所有页面文字内容通过配置管理，支持变量替换
- **问卷配置化**：完整的问卷结构、字段、验证规则配置
- **主题切换**：一键切换整个应用的主题风格和内容

### 配置驱动特性
- **数据驱动渲染**：页面完全基于配置动态渲染
- **变量替换系统**：支持 `{count}`, `{theme}` 等动态变量
- **多语言准备**：配置结构为多语言支持做好准备
- **向后兼容**：配置变更不影响现有功能

## 🔧 核心功能模块

### 1. 用户画像层 (`pages/index/`)
- **配置化问卷系统**：基于 `config.js` 的8步问卷流程
- **多主题支持**：Union数字生活 vs 职场技能主题
- **智能验证**：基于配置的动态表单验证
- **头像系统**：DiceBear生成 + 自定义上传
- **数据同步**：本地与云端双重数据保护

### 2. 社群分类层 (`pages/briefing/`)
- **智能分类算法**：四维度用户社群自动分类
- **配置化界面**：所有文字内容支持主题配置
- **交互式浏览**：主题切换器 + 社群详情弹窗
- **个性化高亮**：当前用户渐变圆环标识
- **广场模式**：支持从connect页面跳转的特殊模式

### 3. 社交连接层 (`pages/connect/`)
- **黑胶唱片设计**：创新的旋转唱片主题浏览
- **两层名片系统**：简易名片列表 + 详细名片弹窗
- **配置化文字**：搜索提示、状态文字、成员信息等全面配置
- **智能匹配**：基于社群归属的成员展示
- **触摸交互**：惯性滚动、磁吸对齐、振动反馈

### 4. 数据管理层 (`cloudfunctions/`)
- **用户分类引擎**：`classifyUsers` 云函数
- **数据同步服务**：`getUserData`, `submitQuestionnaire`
- **测试数据生成**：配置化的 `generateTestData`
- **用户认证**：`login` 身份识别服务

## 📋 技术架构

### 配置系统架构
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   统一配置文件   │    │     页面系统      │    │   云函数配置    │
│                │    │                 │    │                │
│ config.js      │───▶│ 动态渲染引擎     │    │ 测试数据配置    │
│                │    │ 文字管理系统     │    │ 分类算法配置    │
│ • 主题配置     │    │ 验证规则引擎     │    │ 选项同步机制    │
│ • 文字配置     │    │ 变量替换系统     │    │                │
│ • 问卷配置     │    │                 │    │                │
└─────────────────┘    └──────────────────┘    └─────────────────┘
```

### 开发环境
- **微信小程序框架**：原生框架 + 云开发
- **配置管理**：统一配置系统 + 多主题支持
- **数据存储**：云数据库 + 本地缓存
- **云服务**：云函数 + 云存储

### 代码规范
- **配置优先**：所有可配置内容通过配置文件管理
- **主题一致性**：确保所有主题配置结构完全一致
- **ES6+语法**：使用现代JavaScript特性
- **组件化设计**：可复用的页面组件和配置模块
- **文档同步**：配置变更时及时更新相关文档

### 文件组织
```
miniprogram/
├── utils/
│   └── config.js              # 统一配置文件（核心）
├── pages/
│   ├── index/                # 配置化问卷页
│   ├── briefing/             # 配置化社群报告页
│   ├── connect/              # 配置化社交连接页
│   └── device/               # 硬件设备页
└── cloudfunctions/
    ├── classifyUsers/        # 用户分类算法
    ├── generateTestData/     # 配置化测试数据
    └── submitQuestionnaire/  # 问卷数据处理
```

## 🎯 任务需求示例

### 配置系统优化
- **新增主题配置**：添加新的主题配置，确保文字和问卷内容完整
- **配置验证工具**：开发配置文件的验证和检查工具
- **配置热更新**：实现配置变更的实时预览功能
- **配置文档生成**：自动生成配置项的文档说明

### 功能增强任务
- **多语言支持**：基于现有配置架构扩展多语言功能
- **配置可视化编辑器**：开发可视化的配置编辑界面
- **主题预览系统**：实现主题切换的实时预览功能
- **配置导入导出**：支持配置文件的导入导出功能

### 新功能开发
- **实时消息推送**：添加基于配置的消息推送系统
- **用户标签管理**：扩展用户标签和分组功能
- **活动管理模块**：开发活动推荐和日程管理功能
- **数据分析面板**：增加用户行为分析和统计功能

### 性能优化建议
- **配置缓存优化**：改进配置文件的加载和缓存策略
- **主题切换性能**：优化主题切换的响应速度
- **文字渲染优化**：提升大量文字内容的渲染性能
- **配置压缩**：实现配置文件的压缩和优化

## 📤 配置开发规范

### 配置文件规范
- **结构一致性**：所有主题配置必须保持相同的结构
- **变量命名**：使用清晰、一致的变量命名规范
- **路径规范**：配置路径使用点分割格式，如 `briefing.members.joined`
- **变量替换**：使用 `{变量名}` 格式，支持嵌套变量

### 页面集成规范
- **统一引入**：使用 `const Config = require('../../utils/config.js')`
- **批量加载**：使用 `Config.getTexts()` 批量加载文字配置
- **变量处理**：使用 `Config.getText()` 处理变量替换
- **缓存管理**：在页面生命周期内合理缓存配置

### 开发流程
1. **配置设计**：先设计配置结构，再实现功能
2. **主题同步**：确保所有主题配置完整一致
3. **文档更新**：配置变更时同步更新README文档
4. **测试验证**：验证配置切换和变量替换功能

## 📋 输出要求

- **遵循配置化原则**：所有新功能都应支持配置化
- **保持主题一致性**：确保所有主题的完整性和一致性
- **更新配置文档**：新增配置时更新相关文档
- **测试配置功能**：验证配置加载、主题切换等功能
- **性能考虑**：注意配置加载的性能影响
- **向后兼容**：确保配置变更不影响现有功能

---

**技术栈**: 微信小程序 + 云开发 + 统一配置架构  
**设计理念**: 配置驱动 + 多主题支持 + 沉浸式社交体验  
**更新日期**: 2024年12月  
**版本**: v2.0.0 - 统一配置架构