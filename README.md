# UnionLink 社交圈小程序

基于微信云开发的智能社交互联平台，通过问卷数据驱动的社群分类算法，为用户构建个性化的社交连接体验。

## 🏗️ 系统架构

### 核心技术栈
```
前端层: 微信小程序原生框架
后端层: 微信云开发 + 云函数
数据层: 云数据库 + 云存储
算法层: 智能分类引擎 + 社群匹配算法
```

### 应用层级结构
```
UnionLink/
├── 用户体验层
│   ├── connect/     # 社交连接与主题探索中心
│   ├── device/      # 设备管理与状态监控
│   ├── index/       # 个人资料与系统入口
│   └── briefing/    # 社群报告与数据可视化 (隐藏入口)
├── 数据处理层
│   ├── classifyUsers/      # 智能分类引擎
│   ├── login/             # 身份认证服务
│   ├── submitQuestionnaire/ # 问卷数据处理
│   └── getUserData/       # 用户数据获取
└── 数据存储层
    ├── users_bar/         # 用户问卷与基础信息
    ├── class_bar/         # 社群分类结果
    └── 云存储/            # 静态资源与媒体文件
```

## 🔄 数据流与系统集成

### 核心数据流向
```mermaid
用户注册 → 问卷填写 → 智能分类 → 社群分配 → 社交连接
    ↓           ↓           ↓           ↓           ↓
users_bar  users_bar  classifyUsers  class_bar   connect
```

### 页面间数据传递
- **全局状态管理**: 通过 `app.globalData` 维护核心状态
- **身份识别**: `login` 云函数提供统一的用户身份服务
- **社群数据**: `class_bar` 集合作为所有社交功能的数据源
- **导航状态**: 自定义TabBar组件同步页面状态

### 智能分类算法
基于四个核心维度进行用户社群分类：

1. **数码轨迹博物馆** - 基于设备使用历史和数字化进程
2. **感官沉浸研究所** - 基于感官偏好和沉浸体验方式
3. **行为方式匹配站** - 基于学习风格和互动行为模式
4. **能量节律星球** - 基于MBTI性格类型和生活节律

## 🎨 设计理念与交互模式

### 视觉设计系统
- **深色科技主题**: 统一的 `#121212` 背景，营造沉浸式体验
- **渐变高亮系统**: 蓝紫渐变 (`#00d4ff` → `#7b68ee`) 作为关键交互标识
- **分层界面架构**: 清晰的信息层级，从概览到详情的渐进式展示

### 交互设计模式
- **黑胶唱片隐喻**: connect页面采用音乐播放器的视觉语言
- **两层名片系统**: 简易名片列表 → 详细名片弹窗的层级展示
- **触觉反馈增强**: 滑动、点击等关键操作配合微信振动API
- **惯性物理效果**: 基于真实物理规律的滚动和缓动动画

## 📊 核心业务逻辑

### 用户生命周期
```
1. 用户注册 → 微信授权登录
2. 问卷填写 → 多维度数据收集 (7个步骤)
3. 智能分类 → classifyUsers 云函数执行分类算法
4. 社群分配 → 用户被分配到4个主题下的具体社群
5. 社交探索 → 通过connect页面发现同社群成员
6. 深度互动 → 查看成员详细信息，建立连接
```

### 导航架构调整
```
旧架构: 主页 → 连接 → 报告 → 设备
新架构: 连接 → 设备 → 主页
特殊入口: briefing 通过 connect 页面搜索框进入
```

### 关键技术特性
- **数据驱动**: 基于问卷数据的智能社群分类
- **配置化架构**: 问卷内容和界面文字完全配置化，支持主题切换
- **全局文字管理**: 统一的多语言文字配置系统，支持变量替换
- **实时同步**: 云函数确保分类数据的实时更新
- **状态管理**: 统一的页面状态同步机制
- **性能优化**: 硬件加速动画，按需数据加载
- **错误恢复**: 完善的异常处理和用户反馈机制

## 🛠️ 开发与部署

### 环境要求
- 微信开发者工具
- 微信小程序云开发环境
- Node.js 14+ (云函数运行环境)

### 核心云函数
- `classifyUsers`: 智能分类引擎 - 将用户问卷数据转化为社群归属
- `login`: 身份认证服务 - 获取用户openid和基础信息
- `submitQuestionnaire`: 问卷处理 - 收集和存储用户多维度数据
- `getUserData`: 数据查询 - 获取用户完整档案信息

### 数据库设计
- **users_bar**: 用户档案集合，存储问卷数据和基础信息
- **class_bar**: 分类结果集合，存储社群分配和成员关系
- **单文档模式**: class_bar 采用单文档存储所有分类数据，优化查询性能

## 🎯 产品价值与愿景

### 核心价值
- **智能匹配**: 基于多维度数据的精准社群分类
- **真实连接**: 超越简单社交，建立有意义的人际纽带
- **个性化体验**: 每个用户都有独特的社群归属和展示方式
- **数据洞察**: 为个人和组织提供社交行为分析

### 技术创新
- **问卷驱动分类**: 将传统社交的随机性转化为数据驱动的智能匹配
- **全配置化架构**: 问卷内容、界面文字、主题风格完全配置驱动，支持快速主题切换
- **智能文字管理**: 支持变量替换和多主题的统一文字配置系统
- **视觉隐喻设计**: 黑胶唱片等生活化隐喻降低技术门槛
- **分层信息架构**: 从概览到详情的渐进式信息展示
- **微信生态集成**: 深度整合微信小程序能力和云开发服务

---

**开发团队**: UnionLink Team  
**技术架构**: 微信小程序 + 云开发  
**设计理念**: 数据驱动的智能社交连接  
**最后更新**: 2024年12月  
**版本**: v2.0.0 - 智能社群分类与两层名片交互系统 